{
    "forecasted_data_modelA": [
        {
            "activitydate": "2024-03-01",
            "forecast_values": 19005.95755937474,
            "prediction_interval_lower": -139305.81814961828,
            "prediction_interval_upper": 177318.22326836773
        },
        {
            "activitydate": "2024-03-02",
            "forecast_values": 19921.187559374743,
            "prediction_interval_lower": -150414.47548742488,
            "prediction_interval_upper": 190257.08060617445
        },
        {
            "activitydate": "2024-03-03",
            "forecast_values": 20393.97755937474,
            "prediction_interval_lower": -162019.50803276777,
            "prediction_interval_upper": 202807.58315151726
        },
        {
            "activitydate": "2024-03-04",
            "forecast_values": 13378.097559374739,
            "prediction_interval_lower": -181156.9638601244,
            "prediction_interval_upper": 207913.69897887393
        },
        {
            "activitydate": "2024-03-05",
            "forecast_values": 21049.077559374742,
            "prediction_interval_lower": -185644.34110636855,
            "prediction_interval_upper": 227742.92622511802
        },
        {
            "activitydate": "2024-03-06",
            "forecast_values": 20244.147559374742,
            "prediction_interval_lower": -198637.90850701157,
            "prediction_interval_upper": 239126.43362576113
        },
        {
            "activitydate": "2024-03-07",
            "forecast_values": 18360.26755937474,
            "prediction_interval_lower": -212735.37353055415,
            "prediction_interval_upper": 249456.61864930362
        },
        {
            "activitydate": "2024-03-08",
            "forecast_values": 20449.67755937474,
            "prediction_interval_lower": -222881.43891283637,
            "prediction_interval_upper": 263781.2040315858
        },
        {
            "activitydate": "2024-03-09",
            "forecast_values": 20301.307559374734,
            "prediction_interval_lower": -235283.68892421664,
            "prediction_interval_upper": 275886.87404296605
        },
        {
            "activitydate": "2024-03-10",
            "forecast_values": 14284.887559374742,
            "prediction_interval_lower": -253570.17317753902,
            "prediction_interval_upper": 282140.22829628846
        },
        {
            "activitydate": "2024-03-11",
            "forecast_values": 18256.74755937474,
            "prediction_interval_lower": -261882.01985511946,
            "prediction_interval_upper": 298396.0549738689
        },
        {
            "activitydate": "2024-03-12",
            "forecast_values": 20737.88755937474,
            "prediction_interval_lower": -271696.64284483454,
            "prediction_interval_upper": 313173.17796358396
        },
        {
            "activitydate": "2024-03-13",
            "forecast_values": 13424.117559374743,
            "prediction_interval_lower": -291317.06898382225,
            "prediction_interval_upper": 318165.5141025717
        },
        {
            "activitydate": "2024-03-14",
            "forecast_values": 21097.967559374745,
            "prediction_interval_lower": -295959.16274585604,
            "prediction_interval_upper": 338155.44786460564
        },
        {
            "activitydate": "2024-03-15",
            "forecast_values": 20291.427559374737,
            "prediction_interval_lower": -309089.866478509,
            "prediction_interval_upper": 349673.0415972584
        },
        {
            "activitydate": "2024-03-16",
            "forecast_values": 13149.747559374742,
            "prediction_interval_lower": -328563.234825571,
            "prediction_interval_upper": 354863.1099443206
        },
        {
            "activitydate": "2024-03-17",
            "forecast_values": 19309.02755937474,
            "prediction_interval_lower": -334742.22233930003,
            "prediction_interval_upper": 373360.5574580496
        },
        {
            "activitydate": "2024-03-18",
            "forecast_values": 17848.827559374746,
            "prediction_interval_lower": -348546.7835479136,
            "prediction_interval_upper": 384245.0086666632
        },
        {
            "activitydate": "2024-03-19",
            "forecast_values": 18213.017559374737,
            "prediction_interval_lower": -360532.4949303448,
            "prediction_interval_upper": 396958.54004909436
        },
        {
            "activitydate": "2024-03-20",
            "forecast_values": 19399.30755937474,
            "prediction_interval_lower": -371700.5383853622,
            "prediction_interval_upper": 410499.7435041117
        },
        {
            "activitydate": "2024-03-21",
            "forecast_values": 19936.977559374747,
            "prediction_interval_lower": -383522.0958809831,
            "prediction_interval_upper": 423396.25099973247
        },
        {
            "activitydate": "2024-03-22",
            "forecast_values": 18188.637559374747,
            "prediction_interval_lower": -397633.3450431737,
            "prediction_interval_upper": 434011.1201619231
        },
        {
            "activitydate": "2024-03-23",
            "forecast_values": 14496.997559374742,
            "prediction_interval_lower": -413691.76549735025,
            "prediction_interval_upper": 442686.4606160997
        },
        {
            "activitydate": "2024-03-24",
            "forecast_values": 20037.007559374742,
            "prediction_interval_lower": -420522.0258172527,
            "prediction_interval_upper": 460596.2109360022
        },
        {
            "activitydate": "2024-03-25",
            "forecast_values": 17160.76755937474,
            "prediction_interval_lower": -435771.30096694635,
            "prediction_interval_upper": 470093.33608569583
        },
        {
            "activitydate": "2024-03-26",
            "forecast_values": 14490.097559374743,
            "prediction_interval_lower": -450818.17014557787,
            "prediction_interval_upper": 479798.9252643273
        },
        {
            "activitydate": "2024-03-27",
            "forecast_values": 21447.197559374745,
            "prediction_interval_lower": -456240.14496292,
            "prediction_interval_upper": 499134.8100816695
        },
        {
            "activitydate": "2024-03-28",
            "forecast_values": 14872.19755937474,
            "prediction_interval_lower": -475196.287888052,
            "prediction_interval_upper": 504941.03300680156
        },
        {
            "activitydate": "2024-03-29",
            "forecast_values": 14943.672946640558,
            "prediction_interval_lower": -487508.1755374375,
            "prediction_interval_upper": 517395.97143071867
        },
        {
            "activitydate": "2024-03-30",
            "forecast_values": 15158.36755937474,
            "prediction_interval_lower": -499678.79447559785,
            "prediction_interval_upper": 529996.2695943475
        },
        {
            "activitydate": "2024-03-31",
            "forecast_values": 19325.657559374744,
            "prediction_interval_lower": -507899.316365117,
            "prediction_interval_upper": 546550.7214838667
        }
    ],
    "forecasted_data_modelB": [
        {
            "activitydate": "2024-03-01",
            "forecast_values": 19149.338896579215,
            "prediction_interval_lower": -139188.4882420939,
            "prediction_interval_upper": 177487.65896973296
        },
        {
            "activitydate": "2024-03-02",
            "forecast_values": 19982.747843092817,
            "prediction_interval_lower": -150420.7933323451,
            "prediction_interval_upper": 190386.52426330379
        },
        {
            "activitydate": "2024-03-03",
            "forecast_values": 20419.094845878488,
            "prediction_interval_lower": -162006.89746597904,
            "prediction_interval_upper": 202845.20875416268
        },
        {
            "activitydate": "2024-03-04",
            "forecast_values": 13352.79520062097,
            "prediction_interval_lower": -181015.4423849933,
            "prediction_interval_upper": 207721.5651626145
        },
        {
            "activitydate": "2024-03-05",
            "forecast_values": 21105.139825267663,
            "prediction_interval_lower": -185636.9608858409,
            "prediction_interval_upper": 227847.67018220646
        },
        {
            "activitydate": "2024-03-06",
            "forecast_values": 20187.027927385057,
            "prediction_interval_lower": -198582.80112879645,
            "prediction_interval_upper": 238957.08830811986
        },
        {
            "activitydate": "2024-03-07",
            "forecast_values": 18370.350231752505,
            "prediction_interval_lower": -212852.2242639977,
            "prediction_interval_upper": 249593.6287556757
        },
        {
            "activitydate": "2024-03-08",
            "forecast_values": 20631.02019957339,
            "prediction_interval_lower": -222942.66015420118,
            "prediction_interval_upper": 264205.10261221166
        },
        {
            "activitydate": "2024-03-09",
            "forecast_values": 20255.07069252818,
            "prediction_interval_lower": -235111.8100737254,
            "prediction_interval_upper": 275622.5201680364
        },
        {
            "activitydate": "2024-03-10",
            "forecast_values": 14205.89265333308,
            "prediction_interval_lower": -253658.3760507611,
            "prediction_interval_upper": 282070.419651187
        },
        {
            "activitydate": "2024-03-11",
            "forecast_values": 18337.663852858524,
            "prediction_interval_lower": -261895.38048096604,
            "prediction_interval_upper": 298571.2513960764
        },
        {
            "activitydate": "2024-03-12",
            "forecast_values": 20775.841044602887,
            "prediction_interval_lower": -271420.2273136344,
            "prediction_interval_upper": 312972.6686774069
        },
        {
            "activitydate": "2024-03-13",
            "forecast_values": 13484.262696198157,
            "prediction_interval_lower": -291188.2658385153,
            "prediction_interval_upper": 318156.997449873
        },
        {
            "activitydate": "2024-03-14",
            "forecast_values": 21149.560552131803,
            "prediction_interval_lower": -296310.19198554446,
            "prediction_interval_upper": 338609.66614410427
        },
        {
            "activitydate": "2024-03-15",
            "forecast_values": 20257.907686917988,
            "prediction_interval_lower": -309039.48855794803,
            "prediction_interval_upper": 349555.62765653897
        },
        {
            "activitydate": "2024-03-16",
            "forecast_values": 13162.948316381584,
            "prediction_interval_lower": -328713.1867656033,
            "prediction_interval_upper": 355039.4729876658
        },
        {
            "activitydate": "2024-03-17",
            "forecast_values": 19338.158761003877,
            "prediction_interval_lower": -334884.07144235616,
            "prediction_interval_upper": 373560.65606712026
        },
        {
            "activitydate": "2024-03-18",
            "forecast_values": 17838.809000752808,
            "prediction_interval_lower": -348536.9172648496,
            "prediction_interval_upper": 384215.09192968474
        },
        {
            "activitydate": "2024-03-19",
            "forecast_values": 18255.320617589794,
            "prediction_interval_lower": -360390.2435704114,
            "prediction_interval_upper": 396900.8985604281
        },
        {
            "activitydate": "2024-03-20",
            "forecast_values": 19521.422971276344,
            "prediction_interval_lower": -371769.88295220054,
            "prediction_interval_upper": 410813.31724765163
        },
        {
            "activitydate": "2024-03-21",
            "forecast_values": 19939.52104764294,
            "prediction_interval_lower": -383526.7464362566,
            "prediction_interval_upper": 423405.99373232067
        },
        {
            "activitydate": "2024-03-22",
            "forecast_values": 18258.200583433627,
            "prediction_interval_lower": -397464.9452126343,
            "prediction_interval_upper": 433981.8457111203
        },
        {
            "activitydate": "2024-03-23",
            "forecast_values": 14467.18105852048,
            "prediction_interval_lower": -413555.4200791242,
            "prediction_interval_upper": 442490.45693669183
        },
        {
            "activitydate": "2024-03-24",
            "forecast_values": 20111.00321459447,
            "prediction_interval_lower": -420694.4601599151,
            "prediction_interval_upper": 460916.64103840565
        },
        {
            "activitydate": "2024-03-25",
            "forecast_values": 17153.427763535066,
            "prediction_interval_lower": -435684.7817257626,
            "prediction_interval_upper": 469992.1269229764
        },
        {
            "activitydate": "2024-03-26",
            "forecast_values": 14462.804108794544,
            "prediction_interval_lower": -450851.3945198443,
            "prediction_interval_upper": 479777.58710839954
        },
        {
            "activitydate": "2024-03-27",
            "forecast_values": 21402.37110197516,
            "prediction_interval_lower": -456058.8754142725,
            "prediction_interval_upper": 498863.88418456557
        },
        {
            "activitydate": "2024-03-28",
            "forecast_values": 14842.732464942394,
            "prediction_interval_lower": -475058.61247317196,
            "prediction_interval_upper": 504744.4319588803
        },
        {
            "activitydate": "2024-03-29",
            "forecast_values": 14927.90232128578,
            "prediction_interval_lower": -487783.03802721534,
            "prediction_interval_upper": 517639.2880926675
        },
        {
            "activitydate": "2024-03-30",
            "forecast_values": 15135.570420927605,
            "prediction_interval_lower": -499914.76122562983,
            "prediction_interval_upper": 530186.6340459565
        },
        {
            "activitydate": "2024-03-31",
            "forecast_values": 19306.72033686099,
            "prediction_interval_lower": -507916.94703591114,
            "prediction_interval_upper": 546530.4813618057
        }
    ],
    "previous_month_actuals": [
        {
            "activitydate": "2024-02-01",
            "actuals": 25187
        },
        {
            "activitydate": "2024-02-02",
            "actuals": 25067
        },
        {
            "activitydate": "2024-02-03",
            "actuals": 22387
        },
        {
            "activitydate": "2024-02-04",
            "actuals": 19060
        },
        {
            "activitydate": "2024-02-05",
            "actuals": 16287
        },
        {
            "activitydate": "2024-02-06",
            "actuals": 24633
        },
        {
            "activitydate": "2024-02-07",
            "actuals": 22555
        },
        {
            "activitydate": "2024-02-08",
            "actuals": 21560
        },
        {
            "activitydate": "2024-02-09",
            "actuals": 24126
        },
        {
            "activitydate": "2024-02-10",
            "actuals": 21084
        },
        {
            "activitydate": "2024-02-11",
            "actuals": 9541
        },
        {
            "activitydate": "2024-02-12",
            "actuals": 24979
        },
        {
            "activitydate": "2024-02-13",
            "actuals": 22852
        },
        {
            "activitydate": "2024-02-14",
            "actuals": 13488
        },
        {
            "activitydate": "2024-02-15",
            "actuals": 23013
        },
        {
            "activitydate": "2024-02-16",
            "actuals": 20764
        },
        {
            "activitydate": "2024-02-17",
            "actuals": 46707
        },
        {
            "activitydate": "2024-02-18",
            "actuals": 19506
        },
        {
            "activitydate": "2024-02-19",
            "actuals": 23742
        },
        {
            "activitydate": "2024-02-20",
            "actuals": 23705
        },
        {
            "activitydate": "2024-02-21",
            "actuals": 22958
        },
        {
            "activitydate": "2024-02-22",
            "actuals": 24632
        },
        {
            "activitydate": "2024-02-23",
            "actuals": 22968
        },
        {
            "activitydate": "2024-02-24",
            "actuals": 12221
        },
        {
            "activitydate": "2024-02-25",
            "actuals": 20625
        },
        {
            "activitydate": "2024-02-26",
            "actuals": 25552
        },
        {
            "activitydate": "2024-02-27",
            "actuals": 14983
        },
        {
            "activitydate": "2024-02-28",
            "actuals": 26288
        },
        {
            "activitydate": "2024-02-29",
            "actuals": 21991
        }
    ]
}

import React, { useEffect } from "react";
import { Line } from "react-chartjs-2";
import { Chart, registerables } from "chart.js";
import zoomPlugin from "chartjs-plugin-zoom";
import "chartjs-adapter-date-fns";

// Register all components
Chart.register(...registerables);

Chart.register(zoomPlugin);
const FanChart = (props) => {
  // console.log("props", props.chartData);
  const {
    previous_month_actuals,
    forecasted_data_modelA,
    forecasted_data_modelB,
  } = props.chartData;
  const actualData = [];
  const forecastValueA = [];
  const forecastAUpper = [];
  const forecastAlower = [];
  const forecastValueB = [];
  const forecastBUpper = [];
  const forecastBlower = [];
  const labels = [];

  previous_month_actuals?.map((item) => {
    labels.push(item.activitydate);
    actualData.push(item.actuals);
    forecastValueA.push(null);
    forecastAUpper.push(null);
    forecastAlower.push(null);
    forecastValueB.push(null);
    forecastBUpper.push(null);
    forecastBlower.push(null);
  });
  forecasted_data_modelA?.map((item) => {
    labels.push(item.activitydate);
    actualData.push(null);
    forecastValueA.push(item.forecast_values.toFixed());
    forecastAUpper.push(item.prediction_interval_upper.toFixed());
    forecastAlower.push(item.prediction_interval_lower.toFixed());
  });
  forecasted_data_modelB?.map((item) => {
    labels.push(item.activitydate);
    actualData.push(null);
    forecastValueB.push(item.forecast_values.toFixed());
    forecastBUpper.push(item.prediction_interval_upper.toFixed());
    forecastBlower.push(item.prediction_interval_lower.toFixed());
  });

  const data = {
    labels: labels,
    datasets: [
      {
        label: "Actual Data",
        data: actualData,
        borderColor: "rgba(255, 128, 39, 1)",
        backgroundColor: "rgba(255, 128, 39, 1)",
        fill: false,
        tension: 0.4,
        pointRadius: 2,
      },
      {
        label: "Model A Forecast Value",
        data: forecastValueA,
        backgroundColor: "rgba(44, 157, 239, 1)",
        fill: false,
        pointRadius: 2,
      },
      {
        label: "Forecast A Upper Interval",
        data: forecastAUpper,
        backgroundColor: "rgba(204, 232, 251, 1)",
        pointRadius: 0,
        tension: 0.4,
        fill: "origin",
      },
      {
        label: "Forecast A Lower Interval",
        data: forecastAlower,
        backgroundColor: "rgba(204, 232, 251, 1)",
        pointRadius: 0,
        tension: 0.4,
        fill: "origin",
      },
      {
        label: "Model B Forecast Value",
        data: forecastValueB,
        backgroundColor: "rgba(0, 184, 69, 1)",
        fill: false,
        pointRadius:1
      },
      {
        label: "Forecast Upper Interval",
        data: forecastBUpper,
        pointRadius: 0,
        tension: 0.4,
        backgroundColor: "rgba(200, 240, 215, 1)",
      },
      {
        label: "Forecast Lower Interval",
        data: forecastBlower,
        pointRadius: 0,
        tension: 0.4,
        backgroundColor: "rgba(200, 240, 215, 1)",
      },
    ],
  };

  const options = {
    scales: {
      y: {
        beginAtZero: true,

        // ticks: {
        //   stepSize: 30,
        // },
        title: {
          display: true,
          text: "Disconnects",
        },
      },
      x: {
        position: "bottom",
        type: "time",
        time: {
          unit: "month",
          displayFormats: {
            monnth: "MMM",
          },
        },
      },
    },

    plugins: {
      legend: {
        position: "bottom",
      },

      // zoom: {
      //   zoom: {
      //     wheel: {
      //       enabled: true, // Enable zooming with mouse wheel
      //     },
      //     pinch: {
      //       enabled: true, // Enable pinch-to-zoom on touch devices
      //     },
      //     mode: "xy", // Allow zooming in both directions
      //   },
      //   pan: {
      //     enabled: true, // Enable panning
      //     mode: "xy", // Allow panning in both directions
      //   },
      // },
    },
  };

  useEffect(() => {
    // Cleanup Chart.js registry
    return () => {
      Chart.unregister();
    };
  }, []);

  return (
    <div>
      <Line data={data} options={options} />
    </div>
  );
};

export default FanChart;
